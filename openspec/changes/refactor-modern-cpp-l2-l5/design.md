# Design: L2-L5 现代化主线设计

## 1. 总体策略
- 采用单主线分里程碑（M1-M8），每个里程碑必须通过质量门禁后才能进入下一阶段。
- 允许破坏性升级，但必须提供：
  1) 明确变更清单；
  2) 可执行迁移指南；
  3) 回滚点（tag + 操作步骤）。

## 2. 技术原则
- KISS: 先消除全局状态与重复配置，再引入新抽象。
- YAGNI: 仅实现当前阶段必须能力，不提前引入重型框架。
- DRY: 统一构建选项、错误模型、清理顺序、测试门禁。
- SOLID: AST/Type/Semantic/Codegen/Interface 按职责拆分与演进。

## 3. 里程碑输出
- M1-M2（L2）：构建与工程基线现代化。
- M3-M5（L3-L4）：核心架构主路径现代化与输出稳定性门禁。
- M6-M8（L4-L5）：性能/可观测能力与接口发布治理。

## 4. 质量门禁
每个里程碑必须满足：
- 跨平台构建通过；
- 相关测试与 golden 回归通过；
- sanitizer（适用平台）通过；
- 文档同步更新；
- 风险与回滚记录更新。

## 5. 当前增量（本次实现）
- 已将顶层构建的公共编译选项改为目标级应用函数；
- 已移除全局 include 目录注入，工具目标显式添加必要 include；
- 已统一核心目标的“公共选项+clang-tidy”应用入口。
