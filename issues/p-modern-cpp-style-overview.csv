ID,Title,Description,Acceptance,Test_Method,Tools,Dev_Status,Review1_Status,Regression_Status,Files,Dependencies,Notes
M1,建立 modern C++ 风格基线（规范+格式化配置）,新增 docs/STYLE.md（中文）并提供 .clang-format 与 .editorconfig（默认不强制全库重排，仅约束新代码与触及文件）,"STYLE 文档与配置文件齐备；默认构建与测试不受影响；不引入大规模纯格式化 diff",manual: review docs | cmake --build build-vs --config Release | ctest --test-dir build-vs -C Release --output-on-failure,manual,TODO,TODO,TODO,"docs/STYLE.md | .clang-format | .editorconfig",none,如需全库格式化需单开专项并锁定范围
M2,引入 clang-tidy 基线（可选启用）,新增 .clang-tidy 与 CMake 选项（默认 OFF）用于增量静态检查与 modernize 建议,"默认构建不依赖 clang-tidy；启用选项时在 clang-tidy 可用环境下可运行并输出结果；构建与测试通过","cmake -S . -B build-vs | cmake --build build-vs --config Release | ctest --test-dir build-vs -C Release --output-on-failure",manual,TODO,TODO,TODO,".clang-tidy | CMakeLists.txt | cmake/*",M1,保持默认 OFF 避免工具链耦合
M3,Windows/MSVC 告警清零（ERROR 宏冲突与编码）,修复 main.hh 的 ERROR 宏与 WinSDK 宏冲突并排查 C4819 等编码告警,"MSVC 下不再出现 C4005(ERROR)；如有 C4819 在默认构建路径消除；构建与测试通过","cmake --build build-vs --config Release | ctest --test-dir build-vs -C Release --output-on-failure",manual,TODO,TODO,TODO,"main.hh | src/* | stage*/*",none,优先最小改动并避免改变错误处理语义
M4,提炼通用 RAII 工具并复用,把临时文件与资源清理等通用 RAII 抽成可复用工具（scope_exit 或自定义 deleter）并在核心入口复用,"新增可复用工具头文件；至少替换 2-3 处重复清理逻辑；行为不变；构建与测试通过","cmake --build build-vs --config Release | ctest --test-dir build-vs -C Release --output-on-failure",manual,TODO,TODO,TODO,"include/matiec/* | src/matiec_lib.cc | main.cc",none,注意头文件依赖与最小暴露 API
M5,C API 输出格式语义修复（MATIEC_OUTPUT_IEC）+可验证测试,明确并修复 output_format 行为：IEC 输出要么真正生效要么明确返回不支持并文档化；补充测试验证输出内容/文件,"MATIEC_OUTPUT_IEC 有确定且可验证行为；E2E 测试对输出文件或内容做断言；构建与测试通过","cmake --build build-vs --config Release | ctest --test-dir build-vs -C Release --output-on-failure",manual,DONE,DONE,DONE,"CMakeLists.txt | stage4/CMakeLists.txt | src/matiec_lib.cc | tests/e2e/test_e2e_compile.cc",none,已落地（5bc4a10）：libmatiec 对 IEC 输出做运行时分派并新增 E2E 输出断言
M6,阶段化移除 exit() 并接入 ErrorReporter,把关键错误路径从 exit()/stderr 改为可捕获的异常或可返回错误并通过 ErrorReporter 收集,"测试触发错误不再导致进程退出；至少覆盖一条历史 exit 路径；尽可能解除 SyntaxValidationTest.CompileIdentifierTests 的 SKIP（或提供替代验证）","cmake --build build-vs --config Release | ctest --test-dir build-vs -C Release --output-on-failure",manual,TODO,TODO,TODO,"stage1_2/* | stage3/* | stage4/* | src/matiec_lib.cc | tests/*",none,改动面大需拆分 pass 并优先低风险路径
M7,字符串与缓冲区安全升级（分批）,逐步替换固定长度 buffer 与危险 C 字符串函数为 std::string/std::string_view 或安全封装,"完成第一批替换清单（可从 util 或非解析器核心开始）；行为不变；构建与测试通过","cmake --build build-vs --config Release | ctest --test-dir build-vs -C Release --output-on-failure",manual,TODO,TODO,TODO,"module:util | module:stage1_2 | module:stage3 | module:stage4 | src/*",none,解析器相关风险高需更细拆分与更强测试护栏
M8,低风险 C++17 关键字与类型安全改造试点,在限定范围内做 const-correctness 与类型安全小步改造（nullptr/override/[[nodiscard]]/enum class/noexcept 等）,"不改变行为；编译通过；测试通过；必要时记录改动范围与收益","cmake --build build-vs --config Release | ctest --test-dir build-vs -C Release --output-on-failure",manual,TODO,TODO,TODO,"src/* | include/* | main.cc | tests/*",M1,避免大范围机械替换导致噪音 diff
